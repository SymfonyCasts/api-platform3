diff --git a/src/State/EntityClassDtoStateProcessor.php b/src/State/EntityClassDtoStateProcessor.php
index 16541455..28fcc57a 100644
--- a/src/State/EntityClassDtoStateProcessor.php
+++ b/src/State/EntityClassDtoStateProcessor.php
@@ -12,6 +12,7 @@ use App\Entity\User;
 use App\Repository\UserRepository;
 use Symfony\Component\DependencyInjection\Attribute\Autowire;
 use Symfony\Component\PasswordHasher\Hasher\UserPasswordHasherInterface;
+use Symfonycasts\MicroMapper\MicroMapperInterface;
 
 class EntityClassDtoStateProcessor implements ProcessorInterface
 {
@@ -20,6 +21,7 @@ class EntityClassDtoStateProcessor implements ProcessorInterface
         #[Autowire(service: PersistProcessor::class)] private ProcessorInterface $persistProcessor,
         #[Autowire(service: RemoveProcessor::class)] private ProcessorInterface $removeProcessor,
         private UserPasswordHasherInterface $userPasswordHasher,
+        private MicroMapperInterface $microMapper
     )
     {
 
@@ -45,24 +47,6 @@ class EntityClassDtoStateProcessor implements ProcessorInterface
 
     private function mapDtoToEntity(object $dto): object
     {
-        assert($dto instanceof UserApi);
-        if ($dto->id) {
-            $entity = $this->userRepository->find($dto->id);
-
-            if (!$entity) {
-                throw new \Exception(sprintf('Entity %d not found', $dto->id));
-            }
-        } else {
-            $entity = new User();
-        }
-
-        $entity->setEmail($dto->email);
-        $entity->setUsername($dto->username);
-        if ($dto->password) {
-            $entity->setPassword($this->userPasswordHasher->hashPassword($entity, $dto->password));
-        }
-        // TODO: handle dragon treasures
-
-        return $entity;
+        return $this->microMapper->map($dto, User::class);
     }
 }
